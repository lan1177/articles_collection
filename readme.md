# AI knowledge base（飞书多维表格驱动）

这是一个基于 Flask 的个人博客网站，数据来源于飞书多维表格。采用苹果设计风格，整体极简白色主题，支持现代化卡片式展示和高效查找。

> from lan

## 功能特点

1. 首页展示
   - 博客主标题（AI knowledge base）
   - 精选金句（加粗显示，若有）
   - 概要内容输出（飞书表格"概要内容输出"字段，完整展示）
   - 新标签页打开文章详情

2. 文章详情页
   - 完整标题
   - 精选金句
   - "查看原文"按钮（位于金句下方，自动识别并跳转外部原文链接，支持微信、知乎等主流平台）
   - 点评内容（如有）
   - 完整文章内容

3. 查找功能
   - 首页顶部支持关键字查找
   - 支持标题、点评、正文内容模糊搜索
   - 搜索结果高亮关键字，展示正文片段，支持跳转详情页

4. 其他
   - 全站响应式设计，适配移动端
   - 极简黑色导航栏，仅保留 LOGO
   - 按钮、卡片、字体等细节多次优化，风格简洁高级

## 技术栈

- 后端：Python Flask 3.0.0
- 前端：原生HTML/CSS，苹果风格
- 数据源：飞书多维表格

## 飞书配置要求

1. 创建飞书应用
   - 获取应用凭证（App ID 和 App Secret）
   - 开启多维表格权限：`bitable:record:read`

2. 创建多维表格
   - 建议包含以下字段（字段名需与代码一致）：
     * 标题
     * 金句输出
     * 概要内容输出
     * 全文内容输出
     * 点评（可选）
     * 链接（外部原文链接，支持微信、知乎等）

## 快速开始

1. 克隆项目后，创建以下目录结构：
```
blog/
├── README.md
├── requirements.txt
├── config.py           # 配置文件
├── app.py              # 主应用
├── feishu_api.py       # 飞书API与数据清洗
├── static/             # 静态文件
│   ├── css/
│   └── js/
└── templates/          # HTML模板
    ├── base.html
    ├── index.html
    ├── detail.html
    ├── search.html
    ├── 404.html
    └── 500.html
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

3. 配置飞书应用信息
在 `config.py` 中填入您的飞书应用信息：
```python
class Config:
    FEISHU_APP_ID = "你的AppID"
    FEISHU_APP_SECRET = "你的AppSecret"
    BASE_ID = "你的BaseID"
    TABLE_ID = "你的TableID"
```

4. 运行应用：
```bash
python app.py
```

5. 访问网站：
浏览器访问 http://localhost:5002

## 常见问题

1. 数据显示异常
   - 检查飞书应用权限是否正确开启
   - 验证多维表格的字段名称是否与代码中完全一致
   - 确认表格中已添加数据

2. "查看原文"无法跳转
   - 请确保"链接"字段为有效的 http(s) 开头的外部链接
   - 微信、知乎等平台部分链接在PC端浏览器可能被平台拦截，建议用手机端或微信内置浏览器测试

3. 样式显示问题
   - 确保所有模板文件都在 `templates` 目录下
   - 检查浏览器是否支持现代CSS特性

## 注意事项

- 不要在代码中直接硬编码飞书应用凭证，建议用环境变量或配置文件管理敏感信息
- 已添加缓存机制，优化了数据和样式加载
- 支持飞书"链接"字段为字典或字符串，自动提取真实URL

## 开发建议

- 使用 Flask 的调试模式便于开发，修改代码后会自动重载
- 在飞书多维表格中编辑内容，支持实时更新，无需重启应用

## 项目维护

如需帮助或报告问题，请提供以下信息：
1. 完整的错误信息
2. 飞书应用配置截图
3. 多维表格的结构说明

---

如需进一步定制或有新需求，欢迎随时联系！
